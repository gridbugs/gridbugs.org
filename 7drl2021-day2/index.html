<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="gridbugs">
    <meta property="og:type" content="website">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
	<meta property="og:type" content="article">
	<meta property="og:title" content="7 Day Roguelike 2021: NPCs, Pathfinding, First Level, Final Level, Projectiles, Destructible Terrain">
	<link rel="canonical" href="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/">
	<meta property="og:url" content="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/">

	

	
	    <meta property="article:published_time" content="2021-03-07T00:00:00+00:00">
	

	
	    <meta property="og:image" content="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/intro.png">
	
    

    <link rel="icon" type="image/x-icon" href="https://gridbugs.github.io/gridbugs.org/favicon.png">
    <link rel="alternate" type="application/rss+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/atom.xml">

    <link rel="stylesheet" href="https://gridbugs.github.io/gridbugs.org/style.css">
    <title>
7 Day Roguelike 2021: NPCs, Pathfinding, First Level, Final Level, Projectiles, Destructible Terrain
</title>
  </head>
  <body>
    <div id="content">
      <header>
  <div class="header-nav-container">
    <nav>
      <ul>
	<li class="lhs"><a href="https://gridbugs.github.io/gridbugs.org">gridbugs</a></li>
	
	
	
	<li class="lhs slash-before"><a href="https://gridbugs.github.io/gridbugs.org/devlogs/">devlogs</a></li>
	
	
	<li class="first-rhs rhs"><a href="https://gridbugs.github.io/gridbugs.org/about">about</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">tags</a></li>
      </ul>
    </nav>
  </div>
</header>

      




<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day1&#x2F;" aria-label="Previous">
	  Previous: 7 Day Roguelike 2021: Procedural Generation, Rendering, Pretty Menus, End Text
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day3&#x2F;" aria-label="Next">
	  Next: 7 Day Roguelike 2021: Depressurisation
	</a>
	
      </li>
    </ul>
  </nav>
</div>



<article>
<h1 class="title">7 Day Roguelike 2021: NPCs, Pathfinding, First Level, Final Level, Projectiles, Destructible Terrain</h1>

  
<p class="post-meta">
  <time datetime="2021-03-07T00:00:00+00:00">
    March 07, 2021
  </time>
  
</p>


  

<p>I got through a good amount of core gameplay mechanics today including NPCs, projectiles and destructible terrain.
I also spent some time focussing on flair, such as special first and last levels, animations in the game menu,
death screens, and smoke trails on bullets.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/intro.png" alt="intro.png" /></p>
<span id="continue-reading"></span><h2 id="npcs-and-melee-combat"><a class="zola-anchor" href="#npcs-and-melee-combat" aria-label="Anchor link for: npcs-and-melee-combat">NPCs and Melee Combat</a></h2>
<p>I added a simple enemy that patrols until it finds the player and then chases them.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/npcs.png" alt="npcs.png" /></p>
<p>There’s melee bump combat. The player can kill zombies and zombies can kill the player.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/dead.png" alt="dead.png" /></p>
<h2 id="npcs-in-the-menu"><a class="zola-anchor" href="#npcs-in-the-menu" aria-label="Anchor link for: npcs-in-the-menu">NPCs in the Menu</a></h2>
<p>Rather than just running the renderer in the menu screen, the whole game engine now runs, with NPCs taking their turns
every couple of seconds in real time <em>because it’s cool</em>.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/menu-zombies.png" alt="menu-zombies.png" /></p>
<h2 id="render-from-player-memories"><a class="zola-anchor" href="#render-from-player-memories" aria-label="Anchor link for: render-from-player-memories">Render from player memories</a></h2>
<p>The game will eventually feature destructible terrain.
When rendering the region of the map that the player has previously seen, but can’t currently see, I
need to account for the fact that the terrain may have been destroyed since it was last visible.
I do this by storing the last-seen tile at each location.</p>
<p>Here’s how it looks when you forget to clear tiles when the entity moves to a new location:</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/vision-system-bug.png" alt="vision-system-bug.png" /></p>
<h2 id="intro-level"><a class="zola-anchor" href="#intro-level" aria-label="Anchor link for: intro-level">Intro Level</a></h2>
<p>The first level of the game is short with no combat to set the scene.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/intro.png" alt="intro.png" /></p>
<h2 id="final-level"><a class="zola-anchor" href="#final-level" aria-label="Anchor link for: final-level">Final Level</a></h2>
<p>The stairs on the final floor are replaced with a “fuel bay”, and walking over it ends the game.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/final-level.png" alt="final-level.png" /></p>
<h2 id="projectiles"><a class="zola-anchor" href="#projectiles" aria-label="Anchor link for: projectiles">Projectiles</a></h2>
<p>It’s now possible to fire bullets in cardinal directions. When a projectile hits an enemy with lower armour
than the projectiles PEN, the enemy is damaged and the projectile’s PEN is reduced by the enemy’s armour.
If the PEN is positive after this, the projectile continues along its trajectory until it collides with another
enemy or the hull.</p>
<p>I pulled the particle system out of an <a href="https://github.com/gridbugs/rip">old project</a> so the bullets leave smoke trails
which dissipate in real time.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/bullet.png" alt="bullet.png" /></p>
<h2 id="destructible-terrain"><a class="zola-anchor" href="#destructible-terrain" aria-label="Anchor link for: destructible-terrain">Destructible Terrain</a></h2>
<p>Certain entities (generally all the walls) can be destroyed by shooting them. Each weapon will have
a certain chance of penetrating the hull. I haven’t implemented the decompression mechanic yet.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/destructible.png" alt="destructible.png" /></p>
<h2 id="you-lose-if-you-step-into-the-void"><a class="zola-anchor" href="#you-lose-if-you-step-into-the-void" aria-label="Anchor link for: you-lose-if-you-step-into-the-void">You lose if you step into the void</a></h2>
<p>No explanation needed!</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/adrift.png" alt="adrift.png" /></p>
<p>I forgot to prevent NPCs from walking into the void, so they escaped the ship to explore the heads up display!</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day2/space-zombies.png" alt="space-zombies.png" /></p>

</article>


<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day1&#x2F;" aria-label="Previous">
	  Previous: 7 Day Roguelike 2021: Procedural Generation, Rendering, Pretty Menus, End Text
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day3&#x2F;" aria-label="Next">
	  Next: 7 Day Roguelike 2021: Depressurisation
	</a>
	
      </li>
    </ul>
  </nav>
</div>



      <footer>
  <div class="footer-nav-container">
    <nav>
      <ul>
	<li><a href="https://github.com/gridbugs">github</a></li>
	<li><a href="https://gridbugs.itch.io">itch.io</a></li>
	<li><a href="https://hachyderm.io/@gridbugs">mastodon</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/blog">Blog</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/projects">Projects</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/devlogs">Devlogs</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/about">About</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/contact">Contact</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/external">External</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">Tags</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/atom.xml">Atom</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/rss.xml">RSS</a></li>
      </ul>
    </nav>
  </div>
  <ul class="copyright">
    <li>
      Built with <a href="https://www.getzola.org/">Zola</a>.
    </li>
    <li>
      © 2015-2025 Stephen Sherratt.
    </li>
  </ul>
</footer>

    </div>
  </body>
</html>
