<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="gridbugs">
    <meta property="og:type" content="website">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
	<meta property="og:type" content="article">
	<meta property="og:title" content="I need to go learn more about ELF and static linking">
	<link rel="canonical" href="https://gridbugs.github.io/gridbugs.org/daily/i-need-to-go-learn-more-about-elf-and-static-linking/">
	<meta property="og:url" content="https://gridbugs.github.io/gridbugs.org/daily/i-need-to-go-learn-more-about-elf-and-static-linking/">

	

	
	    <meta property="article:published_time" content="2020-08-20T00:00:00+00:00">
	

	
	    <meta property="og:image" content="https://gridbugs.github.io/gridbugs.org/logo.png">
	
    

    <link rel="icon" type="image/x-icon" href="https://gridbugs.github.io/gridbugs.org/favicon.png">
    <link rel="alternate" type="application/rss+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/atom.xml">

    <link rel="stylesheet" href="https://gridbugs.github.io/gridbugs.org/style.css">
    <title>
I need to go learn more about ELF and static linking
</title>
  </head>
  <body>
    <div id="content">
      <header>
  <div class="header-nav-container">
    <nav>
      <ul>
	<li class="lhs"><a href="https://gridbugs.github.io/gridbugs.org">gridbugs</a></li>
	
	
	
	<li class="lhs slash-before"><a href="https://gridbugs.github.io/gridbugs.org/daily/">daily posts</a></li>
	
	
	<li class="first-rhs rhs"><a href="https://gridbugs.github.io/gridbugs.org/about">about</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">tags</a></li>
      </ul>
    </nav>
  </div>
</header>

      




<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;daily&#x2F;in-homogeneous-coordinates-addition-is-multiplication&#x2F;" aria-label="Previous">
	  Previous: In Homogeneous Coordinates Addition is Multiplication
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;daily&#x2F;more-fun-with-linking&#x2F;" aria-label="Next">
	  Next: More fun with linking
	</a>
	
      </li>
    </ul>
  </nav>
</div>



<article>
<h1 class="title">I need to go learn more about ELF and static linking</h1>

  
<p class="post-meta">
  <time datetime="2020-08-20T00:00:00+00:00">
    August 20, 2020
  </time>
  
</p>


  

<p>I’m working out the shortest path from a
<a href="https://github.com/gridbugs/hello-kernel">kernel-mode program that prints “Hello, World!”</a>
and something that could conceivably by called an OS kernel.
The next step is to launch a user-mode program that makes a <em>system call</em> that prints
“Hello, World!” inside the kernel.</p>
<p>The current problem I’m facing is getting a second program (in addition to the kernel)
loaded into memory during boot. I don’t want to load it from disk, as that would
require disk drivers and a filesystem. I don’t want to load an ELF image from memory,
as that would require an ELF loader.
The bootloader I’m using (<a href="https://wiki.osdev.org/BOOTBOOT">bootboot</a>)
sets up an initial address space for the kernel based on an ELF file, so I’ll add a user-level
program directly to the kernel address space, and have the kernel start executing it
in user-mode once the system is brought up.</p>
<p>I can take the kernel code, and the code for a second, user-level program, and combine them into
a single ELF file using a linker script to position the two programs at sensible locations in
memory. When bootboot attempts to make a bootable disk image out of this ELF, it gets confused
and appears to treat the user-level program’s entry point as the kernel’s entry point.
This is understandable, since the single ELF actually contains two complete programs,
and I’ve done nothing to specify which one should be started when the ELF is executed.</p>
<p>I need to go learn more about ELF and static linking.</p>

</article>


<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;daily&#x2F;in-homogeneous-coordinates-addition-is-multiplication&#x2F;" aria-label="Previous">
	  Previous: In Homogeneous Coordinates Addition is Multiplication
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;daily&#x2F;more-fun-with-linking&#x2F;" aria-label="Next">
	  Next: More fun with linking
	</a>
	
      </li>
    </ul>
  </nav>
</div>



      <footer>
  <div class="footer-nav-container">
    <nav>
      <ul>
	<li><a href="https://github.com/gridbugs">github</a></li>
	<li><a href="https://gridbugs.itch.io">itch.io</a></li>
	<li><a href="https://hachyderm.io/@gridbugs">mastodon</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/blog">Blog</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/projects">Projects</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/devlogs">Devlogs</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/about">About</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/contact">Contact</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/external">External</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">Tags</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/atom.xml">Atom</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/rss.xml">RSS</a></li>
      </ul>
    </nav>
  </div>
  <ul class="copyright">
    <li>
      Built with <a href="https://www.getzola.org/">Zola</a>.
    </li>
    <li>
      © 2015-2025 Stephen Sherratt.
    </li>
  </ul>
</footer>

    </div>
  </body>
</html>
