<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="gridbugs">
    <meta property="og:type" content="website">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
	<meta property="og:type" content="article">
	<meta property="og:title" content="7 Day Roguelike 2021: Depressurisation">
	<link rel="canonical" href="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/">
	<meta property="og:url" content="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/">

	

	
	    <meta property="article:published_time" content="2021-03-08T00:00:00+00:00">
	

	
	    <meta property="og:image" content="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/2.png">
	
    

    <link rel="icon" type="image/x-icon" href="https://gridbugs.github.io/gridbugs.org/favicon.png">
    <link rel="alternate" type="application/rss+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/atom.xml">

    <link rel="stylesheet" href="https://gridbugs.github.io/gridbugs.org/style.css">
    <title>
7 Day Roguelike 2021: Depressurisation
</title>
  </head>
  <body>
    <div id="content">
      <header>
  <div class="header-nav-container">
    <nav>
      <ul>
	<li class="lhs"><a href="https://gridbugs.github.io/gridbugs.org">gridbugs</a></li>
	
	
	
	<li class="lhs slash-before"><a href="https://gridbugs.github.io/gridbugs.org/devlogs/">devlogs</a></li>
	
	
	<li class="first-rhs rhs"><a href="https://gridbugs.github.io/gridbugs.org/about">about</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">tags</a></li>
      </ul>
    </nav>
  </div>
</header>

      




<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day2&#x2F;" aria-label="Previous">
	  Previous: 7 Day Roguelike 2021: NPCs, Pathfinding, First Level, Final Level, Projectiles, Destructible Terrain
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day4&#x2F;" aria-label="Next">
	  Next: 7 Day Roguelike 2021: Upgrades
	</a>
	
      </li>
    </ul>
  </nav>
</div>



<article>
<h1 class="title">7 Day Roguelike 2021: Depressurisation</h1>

  
<p class="post-meta">
  <time datetime="2021-03-08T00:00:00+00:00">
    March 08, 2021
  </time>
  
</p>


  

<p>I spent the day getting depressurisation  working.
When the hull gets pierced, the area of the station exposed to space is depressurised.
Any characters in that part of the station are pulled towards the breach for several turns
until the pressure is equalised.</p>
<p>The red warning light indicates that an area is being depressurised.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/1.png" alt="1.png" /></p>
<p>Once the pressure equalises, a blue warning light indicates that an area has no air.
The oxygen meter will start draining, and when it runs out the health meter will start draining.</p>
<span id="continue-reading"></span>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/2.png" alt="2.png" /></p>
<p>Opening a door to the pressurized region of the ship will cause the connected region to depressurise.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/3.png" alt="3.png" /></p>
<p>Once the pressure equalises again, it becomes possible to walk through the doorway.
Doors can’t be forced closed, so you have to wait for it to close on its own!</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/4.png" alt="4.png" /></p>
<p>When the door closes, the pressure and air supply is instantly restored. The oxygen meter starts ticking back up.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/5.png" alt="5.png" /></p>
<p>If you unwittingly open a door with vacuum on the other side, the area depressurises again and you get sucked through the doorway.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/6.png" alt="6.png" /></p>
<h2 id="glyph-rendering-bug"><a class="zola-anchor" href="#glyph-rendering-bug" aria-label="Anchor link for: glyph-rendering-bug">Glyph Rendering Bug</a></h2>
<p>On one machine I tested on, text rendering was broken such that only the glyphs rendered in the first frame can be rendered correctly in
subsequent frames. My hunch is that this is a bug in <a href="https://crates.io/crates/wgpu_glyph">wgpu_glyph</a>. I’ll sort it out after the 7DRL is
over.</p>
<p>For now, the first thing the game does when it starts is briefly draw all the characters it needs:</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2021-day3/prime-font.png" alt="prime-font.png" /></p>
<p>Of course, it renders them with a black foreground and background, so it just looks like the game is loading. Sneaky!</p>

</article>


<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day2&#x2F;" aria-label="Previous">
	  Previous: 7 Day Roguelike 2021: NPCs, Pathfinding, First Level, Final Level, Projectiles, Destructible Terrain
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2021-day4&#x2F;" aria-label="Next">
	  Next: 7 Day Roguelike 2021: Upgrades
	</a>
	
      </li>
    </ul>
  </nav>
</div>



      <footer>
  <div class="footer-nav-container">
    <nav>
      <ul>
	<li><a href="https://github.com/gridbugs">github</a></li>
	<li><a href="https://gridbugs.itch.io">itch.io</a></li>
	<li><a href="https://hachyderm.io/@gridbugs">mastodon</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/blog">Blog</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/projects">Projects</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/devlogs">Devlogs</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/about">About</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/contact">Contact</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/external">External</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">Tags</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/atom.xml">Atom</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/rss.xml">RSS</a></li>
      </ul>
    </nav>
  </div>
  <ul class="copyright">
    <li>
      Built with <a href="https://www.getzola.org/">Zola</a>.
    </li>
    <li>
      © 2015-2025 Stephen Sherratt.
    </li>
  </ul>
</footer>

    </div>
  </body>
</html>
