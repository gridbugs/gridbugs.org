<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="gridbugs">
    <meta property="og:type" content="website">

    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
	<meta property="og:type" content="article">
	<meta property="og:title" content="7 Day Roguelike 2019: Card Display, Death Screen">
	<link rel="canonical" href="https://gridbugs.github.io/gridbugs.org/7drl2019-day3/">
	<meta property="og:url" content="https://gridbugs.github.io/gridbugs.org/7drl2019-day3/">

	

	
	    <meta property="article:published_time" content="2019-03-05T22:00:00+10:00">
	

	
	    <meta property="og:image" content="https://gridbugs.github.io/gridbugs.org/logo.png">
	
    

    <link rel="icon" type="image/x-icon" href="https://gridbugs.github.io/gridbugs.org/favicon.png">
    <link rel="alternate" type="application/rss+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="gridbugs" href="https://gridbugs.github.io/gridbugs.org/atom.xml">

    <link rel="stylesheet" href="https://gridbugs.github.io/gridbugs.org/style.css">
    <title>
7 Day Roguelike 2019: Card Display, Death Screen
</title>
  </head>
  <body>
    <div id="content">
      <header>
  <div class="header-nav-container">
    <nav>
      <ul>
	<li class="lhs"><a href="https://gridbugs.github.io/gridbugs.org">gridbugs</a></li>
	
	
	
	<li class="lhs slash-before"><a href="https://gridbugs.github.io/gridbugs.org/devlogs/">devlogs</a></li>
	
	
	<li class="first-rhs rhs"><a href="https://gridbugs.github.io/gridbugs.org/about">about</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">tags</a></li>
      </ul>
    </nav>
  </div>
</header>

      




<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2019-day2&#x2F;" aria-label="Previous">
	  Previous: 7 Day Roguelike 2019: Physics and Improved Pathfinding
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2019-day4&#x2F;" aria-label="Next">
	  Next: 7 Day Roguelike 2019: Card Gameplay
	</a>
	
      </li>
    </ul>
  </nav>
</div>



<article>
<h1 class="title">7 Day Roguelike 2019: Card Display, Death Screen</h1>

  
<p class="post-meta">
  <time datetime="2019-03-05T22:00:00+10:00">
    March 05, 2019
  </time>
  
</p>


  

<p>Lots of work on rendering tonight. I made a renderer for the current hand, which can
display cards, empty spaces where cards used to be (before they were played), and
locked card slots which can be unlocked by character upgrade (not yet implemented!).
Deck building and actually playing the cards will come later. I want to have a solid
framework for displaying card info to players before I add too much content.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2019-day3/death.png" alt="death.png" /></p>
<p>Also, who doesn’t love a good death screen? Hopefully by revealing the map to players
when they die, they will think about alternative choices they could have made
which might have lead to them living a little longer.
It could also tease at some undiscovered content!</p>
<span id="continue-reading"></span>
<p>Here’s a screenshot from the terminal version of the game showing off the death screen
and card display. There is a reduced colour palette, but I think it looks fine.</p>
<p><img src="https://gridbugs.github.io/gridbugs.org/7drl2019-day3/death-terminal.png" alt="death-terminal.png" /></p>
<p>Last year I ran into a problem with the terminal version where dark colours
would just come out as black in the terminal, since rgb24 channel values below ~60 get rounded to 0
if you linearly map them to terminal colours. This year I added an escape hatch to
the ansi terminal prototty frontend. You can specify a custom colour conversion
function, which I used here to brighten all the colours.</p>
<h2 id="wishlist"><a class="zola-anchor" href="#wishlist" aria-label="Anchor link for: wishlist">Wishlist</a></h2>
<ul>
<li>The game logic defines cards with descriptions, and the text wrapping of description
text only needs to be computed once at the start. Currently, the text wrapping logic
lives in prototty-common, so either the game needs to depend on prototty-common,
text wrapping must be done each frame (in the prototty level of the engine), or
the prototty level needs to cache the wrapped text and keep the cache in sync.
I’m going for the middle option now, but ideally the text wrapping would live in
a standalone library which the game could depend on, without needing to depend on
the rest of prototty.</li>
<li>The rich text rendering in prototty has an inconsistent interface. Also, the game
wants to define rich text descriptions without needing to depend on all of prototty.
Also, rich text is currently defined with <code>Vec</code> instead of slices, which means it’s
difficult to avoid allocating a fresh <code>Vec</code> on each frame, or maintaining a cache
of <code>Vec</code>s int the prototty layer.</li>
<li>A view in prototty-common which renders a coloured rectangle.</li>
<li>I often depend on <code>grid_2d</code> and then only use the <code>coord_system</code> module it defines,
and usually just to get the <code>XThenYIter</code> for iterating over a rectangle of
coordinates. This suggests that <code>coord_system</code> should probably be its own crate.</li>
</ul>

</article>


<div class="next-prev-nav-container">
  <nav>
    <ul>
      
      
      
      
      <li class="nav-prev">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2019-day2&#x2F;" aria-label="Previous">
	  Previous: 7 Day Roguelike 2019: Physics and Improved Pathfinding
	</a>
	
      </li>
      <li class="nav-next">
	
	<a href="https:&#x2F;&#x2F;gridbugs.github.io&#x2F;gridbugs.org&#x2F;7drl2019-day4&#x2F;" aria-label="Next">
	  Next: 7 Day Roguelike 2019: Card Gameplay
	</a>
	
      </li>
    </ul>
  </nav>
</div>



      <footer>
  <div class="footer-nav-container">
    <nav>
      <ul>
	<li><a href="https://github.com/gridbugs">github</a></li>
	<li><a href="https://gridbugs.itch.io">itch.io</a></li>
	<li><a href="https://hachyderm.io/@gridbugs">mastodon</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/blog">Blog</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/projects">Projects</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/devlogs">Devlogs</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/about">About</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/contact">Contact</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/external">External</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/tags">Tags</a></li>
      </ul>
    </nav>
    <nav>
      <ul>
	<li><a href="https://gridbugs.github.io/gridbugs.org/atom.xml">Atom</a></li>
	<li><a href="https://gridbugs.github.io/gridbugs.org/rss.xml">RSS</a></li>
      </ul>
    </nav>
  </div>
  <ul class="copyright">
    <li>
      Built with <a href="https://www.getzola.org/">Zola</a>.
    </li>
    <li>
      © 2015-2025 Stephen Sherratt.
    </li>
  </ul>
</footer>

    </div>
  </body>
</html>
